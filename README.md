# Tempo 节点一键部署脚本使用文档

## 📖 脚本介绍

这是一个用于自动化部署 Tempo 节点的 Bash 脚本，支持一键安装所有依赖、配置节点并启动运行。

**作者信息：**
- 推特：@ferdie_jhovie
- 免费开源，请勿相信收费
- 如有问题，可联系推特，仅此只有一个号

---

## 🚀 一键安装

```bash
bash <(curl -sSL https://raw.githubusercontent.com/sdohuajia/tempo/refs/heads/main/tempo.sh)
```

---

## 📋 系统要求

- **操作系统**：Ubuntu/Debian Linux
- **权限**：需要 root 或 sudo 权限
- **网络**：需要稳定的网络连接
- **磁盘空间**：建议至少 400GB 可用空间
- **内存**：建议至少 16GB RAM

---

## 🎯 功能说明

脚本会自动完成以下操作：

1. ✅ **更新系统并安装依赖包**
   - 更新系统软件包
   - 安装必要的开发工具和依赖库

2. ✅ **安装 Rust 环境**
   - 自动检测是否已安装 Rust
   - 如未安装则自动安装
   - 配置 Rust 环境变量

3. ✅ **安装 Tempo**
   - 从 GitHub 源码编译安装 Tempo
   - 验证安装是否成功

4. ✅ **生成密钥对**
   - 可选择创建新的密钥对
   - 或使用现有密钥文件

5. ✅ **下载区块链数据**
   - 自动下载测试网数据
   - 数据存储在 `$HOME/tempo/data`

6. ✅ **配置节点参数**
   - 输入钱包地址作为费用接收地址
   - 自动生成启动脚本

7. ✅ **启动节点**
   - 在 screen 会话中后台运行节点
   - 节点持续运行，不受终端关闭影响

---

## 📝 使用步骤

### 1. 运行脚本

执行一键安装命令后，脚本会显示主菜单：

```
===============================================================
脚本由哈哈哈哈编写，推特 @ferdie_jhovie，免费开源，请勿相信收费
如有问题，可联系推特，仅此只有一个号
===============================================================
退出脚本，请按键盘 Ctrl + C
请选择要执行的操作:

  1. 部署节点
```

### 2. 选择部署节点

输入 `1` 并按回车，开始部署流程。

### 3. 创建密钥（可选）

脚本会询问是否创建新的密钥对：
- 输入 `y` 或 `Y`：创建新密钥对
- 输入 `n` 或 `N`：使用现有密钥（需确保密钥文件已存在）

**注意**：如果选择不创建密钥，请确保 `$HOME/tempo/keys/signing.key` 文件已存在。

### 4. 输入钱包地址

脚本会提示输入钱包地址（费用接收地址），请确保地址正确。

### 5. 等待完成

脚本会自动完成所有安装和配置步骤，最后会在 screen 会话中启动节点。

---

## 🛠️ 常用命令

### 查看节点运行状态

```bash
screen -r tempo
```

### 退出 screen 会话（节点继续运行）

在 screen 会话中按：`Ctrl + A`，然后按 `D`

### 停止节点

```bash
screen -S tempo -X quit
```

### 重启节点

```bash
screen -dmS tempo bash -c '$HOME/tempo/start_node.sh'
```

### 查看节点日志

```bash
screen -r tempo
```

### 检查节点进程

```bash
ps aux | grep tempo
```

---

## 📁 文件目录结构

安装完成后，文件结构如下：

```
$HOME/tempo/
├── keys/
│   └── signing.key          # 私钥文件（请妥善保管）
├── data/                    # 区块链数据目录
└── start_node.sh            # 节点启动脚本
```

---

## ⚙️ 节点配置信息

- **数据目录**：`$HOME/tempo/data`
- **密钥文件**：`$HOME/tempo/keys/signing.key`
- **网络**：testnet（测试网）
- **端口**：30303
- **启动脚本**：`$HOME/tempo/start_node.sh`

---

## ❓ 常见问题

### Q1: 脚本执行失败怎么办？

**A:** 检查以下几点：
- 确保有 sudo 权限
- 检查网络连接是否正常
- 查看错误信息，根据提示解决问题
- 确保系统是 Ubuntu/Debian

### Q2: Rust 安装很慢怎么办？

**A:** Rust 安装需要从网络下载，速度取决于网络状况。如果很慢，可以：
- 等待安装完成（通常需要 5-15 分钟）
- 检查网络连接
- 使用代理（如果可用）

### Q3: 如何查看节点是否正常运行？

**A:** 使用以下命令：
```bash
screen -r tempo
```
如果看到节点同步信息，说明运行正常。

### Q4: 节点启动失败怎么办？

**A:** 检查：
- 密钥文件是否存在且正确
- 钱包地址格式是否正确
- 数据是否下载完整
- 查看 screen 会话中的错误信息

### Q5: 如何备份密钥？

**A:** 密钥文件位于 `$HOME/tempo/keys/signing.key`，请妥善保管：
```bash
# 备份密钥
cp $HOME/tempo/keys/signing.key ~/tempo_key_backup.key
```

### Q6: 如何更新节点？

**A:** 停止节点后，重新运行脚本选择部署节点，或手动更新：
```bash
# 停止节点
screen -S tempo -X quit

# 重新安装 Tempo
cargo install --git https://github.com/tempoxyz/tempo.git tempo --root /usr/local --force

# 重启节点
screen -dmS tempo bash -c '$HOME/tempo/start_node.sh'
```

### Q7: 如何卸载节点？

**A:** 
```bash
# 停止节点
screen -S tempo -X quit

# 删除文件（可选）
rm -rf $HOME/tempo
```

---

## ⚠️ 注意事项

1. **密钥安全**
   - 私钥文件 `signing.key` 非常重要，请妥善保管
   - 不要将私钥分享给任何人
   - 建议定期备份密钥文件

2. **系统资源**
   - 节点运行需要一定的 CPU 和内存资源
   - 确保服务器有足够的磁盘空间存储区块链数据

3. **网络要求**
   - 需要稳定的网络连接
   - 建议使用 VPS 或专用服务器

4. **防火墙设置**
   - 确保端口 30303 已开放
   - 如需外部访问，请配置防火墙规则

5. **数据备份**
   - 定期备份 `$HOME/tempo/data` 目录（可选）
   - 重新安装时，可以使用现有数据目录加快同步

---

## 🔄 更新日志

- **v1.0**：初始版本，支持一键部署 Tempo 节点
- 添加主菜单功能
- 优化 Rust 安装检测
- 修复版本验证问题

---

## 📞 支持与反馈

如有问题或建议，请通过以下方式联系：

- **推特**：@ferdie_jhovie
- **注意**：仅此只有一个号，请勿相信其他账号

---

## 📄 许可证

本脚本免费开源，可自由使用和修改。

---

**免责声明**：使用本脚本即表示您已了解相关风险，作者不对使用本脚本造成的任何损失负责。请在使用前仔细阅读文档并做好备份。

